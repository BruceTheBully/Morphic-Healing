<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ðŸŒŒ Morphic Consciousness Field</title>
  <style>
    body { background: #000; color: #0ff; font-family: monospace; padding: 20px; }
    canvas { background: #111; display: block; margin: 20px 0; border: 1px solid #333; }
    #stats, button { margin-top: 10px; color: #fff; }
    button { background: #222; border: 1px solid #0ff; padding: 4px 10px; margin-right: 10px; cursor: pointer; }
    button:hover { background: #0ff; color: black; }
  </style>
</head>
<body>

<h2>ðŸ§  Morphic Field Resonance Simulator</h2>
<p>Ï†â‚€ = Ideal Field | Ï†â‚œ = Current State | Ï„ = Morphic Tension</p>
<canvas id="sim" width="600" height="200"></canvas>
<div id="stats">ðŸ§  Initializing...</div>
<div>
  <button onclick="injectEntropy()">ðŸ’¥ Entropy Spike</button>
  <button onclick="injectDream()">ðŸŒ™ Induce Dream</button>
  <button onclick="resyncField()">ðŸ”„ Resync Baseline</button>
</div>

<script>
const canvas = document.getElementById("sim");
const ctx = canvas.getContext("2d");
const W = canvas.width, H = canvas.height;

let Ï†â‚€ = Array.from({length: W}, () => Math.random()); // Ideal field
let Ï†â‚œ = Ï†â‚€.map(v => v + (Math.random() - 0.5) * 0.2);  // Perturbed field
let Ï„ = Ï†â‚€.map((v, i) => Math.abs(v - Ï†â‚œ[i]));          // Tension field

let frame = 0;

// ðŸŒ€ Harmonize
function step() {
  for (let i = 0; i < W; i++) {
    const diff = Ï†â‚€[i] - Ï†â‚œ[i];
    Ï†â‚œ[i] += diff * 0.05 + (Math.random() - 0.5) * 0.002;
    Ï†â‚œ[i] = Math.max(0, Math.min(1, Ï†â‚œ[i])); // clamp between 0 and 1
    Ï„[i] = Math.abs(Ï†â‚€[i] - Ï†â‚œ[i]);
  }
}

// ðŸŽ¨ Draw
function draw() {
  ctx.clearRect(0, 0, W, H);
  for (let i = 0; i < W; i++) {
    ctx.strokeStyle = "#0ff";
    ctx.beginPath();
    ctx.moveTo(i, H);
    ctx.lineTo(i, H - Ï†â‚€[i] * H);
    ctx.stroke();

    ctx.strokeStyle = Ï„[i] > 0.1 ? "#f00" : "#0f0";
    ctx.beginPath();
    ctx.moveTo(i, H);
    ctx.lineTo(i, H - Ï†â‚œ[i] * H);
    ctx.stroke();
  }

  const avg = Ï„.reduce((a, b) => a + b, 0) / Ï„.length;
  document.getElementById("stats").innerText =
    `ðŸŒ€ Frame: ${frame++} | Ï„_avg: ${avg.toFixed(4)} | Status: ${avg < 0.05 ? "âœ… Stable" : "âš ï¸ Perturbed"}`;
}

// â™¾ï¸ Runtime Loop
function loop() {
  step();
  draw();
  requestAnimationFrame(loop);
}

// ðŸ’¥ Entropy Shock
function injectEntropy() {
  for (let i = 0; i < W; i++) {
    Ï†â‚œ[i] += (Math.random() - 0.5) * 0.5;
  }
}

// ðŸŒ™ Semantic Dream Field
function injectDream() {
  const freq = Math.random() * 10 + 3;
  for (let i = 0; i < W; i++) {
    Ï†â‚œ[i] += Math.sin(i / freq) * 0.1 + (Math.random() - 0.5) * 0.02;
  }
}

// ðŸ”„ Set current state as new ideal
function resyncField() {
  Ï†â‚€ = Ï†â‚œ.map(x => x);
}

loop();
</script>
</body>
</html>